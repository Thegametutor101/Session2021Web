<!DOCTYPE html>
<html>
<head>
	<meta charset = "UTF-8">
	<meta content = "width=device-width, initial-scale=1.0" name = "viewport">
	<title>Ajout d'événement</title>

	<link href = "https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css" rel = "stylesheet">
	<link crossorigin = "anonymous" href = "https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
			integrity = "sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh"
			rel = "stylesheet">
	<link href = "Style-Les_Evenements.css" rel = "stylesheet">
	<link href = "Style-Partie-Administrative.css" rel = "stylesheet">
	<script src = "https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
	<script crossorigin = "anonymous" src = "https://kit.fontawesome.com/86aa9796b2.js"></script>
</head>

<body>
<!-- Le slide menu à gauche -->
<div class = "sidenav" id = "mySidenav">
	<a class = "closebtn" href = "javascript:void(0)" onclick = "closeNav()">&times;</a>
	<a href = "Accueil-Administratif.html">Accueil Administratif</a>
	<a href = "Les-Utilisateurs.html">Utilisateurs</a>
	<a href = "Les-Actualites.html">Actualités</a>
	<a href = "Les-Evenements.html">Évènements</a>
	<a href = "Les-Liens.html">Liens</a>
	<a href = "Le-Contact.html" id = "Page-Selectionne">event</a>
	<a href = "Les-Temoignages.html">Témoignages</a>
	<a href = "Presentation-Programme.html">Présentation du Programme</a>
	<a href = "Video-Accueil.html">Vidéo d'Accueil</a>
	<a href = "Logs-Site-Web.html">Logs du Site Web</a>
	<a href = "Deconnexion.html" id = "deconnexion" onclick = "closeWin()" target = "_blank">Déconnexion</a>
</div>

<img onclick = "openNav()" src = "Logo_Slide_Menu.png">-

<!-- La div principale qui contient toutes les informations du site web. L'id "main" doit obligatoirement être présent -->
<div id = "main">
	<h2>Ajouter</h2>
	<div class = "container">
		<div class = "event__wrapper shadow-lg mt-n9">
			<div class = "row no-gutters">
				<div class = "col-lg-5 event-info__wrapper gradient-brand-color p-5 order-lg-2">
					<figure class = "figure position-absolute m-0 opacity-06 z-index-100"
							style = "bottom:0; right: 10px">
						<svg height = "626px" width = "444px"
								xmlns = "http://www.w3.org/2000/svg" xmlns:xlink = "http://www.w3.org/1999/xlink">
							<defs>
								<linearGradient id = "PSgrad_1" x1 = "0%" x2 = "81.915%" y1 = "57.358%" y2 = "0%">
									<stop offset = "0%" stop-color = "rgb(255,255,255)" stop-opacity = "1"></stop>
									<stop offset = "100%" stop-color = "rgb(0,54,207)" stop-opacity = "0"></stop>
								</linearGradient>

							</defs>
							<path d = "M816.210,-41.714 L968.999,111.158 L-197.210,1277.998 L-349.998,1125.127 L816.210,-41.714 Z"
									fill = "rgb(72, 155, 248)" fill-rule = "evenodd"
									opacity = "0.302"></path>
							<path d = "M816.210,-41.714 L968.999,111.158 L-197.210,1277.998 L-349.998,1125.127 L816.210,-41.714 Z"
									fill = "url(#PSgrad_1)"></path>
						</svg>
					</figure>
				</div>

				<div class = "col-lg-7 event-form__wrapper p-5 order-lg-1">
					<form class = "event-form form-validate" id = "event-form" novalidate = "novalidate">
						<div class = "row">
							<div class = "col-sm-12 mb-2">
								<div class = "form-group">
									<label class = "required-field" for = "name">Nom</label>
									<input class = "form-control" id = "name" name = "name"
											placeholder = "Nom"
											type = "text">
								</div>
							</div>
							<div class = "col-sm-12 mb-2">
								<div class = "form-group">
									<label class = "required-field" for = "description">Description</label>
									<input class = "form-control" id = "description" name = "description"
											placeholder = "Description"
											type = "text">
								</div>
							</div>
							<div class = "col-sm-12 mb-2">
								<div class = "form-group">
									<label class = "required-field" for = "location">Location</label>
									<input class = "form-control" id = "location" name = "location"
											placeholder = "Location"
											type = "text">
								</div>
							</div>
							<div class = "col-sm-12 mb-2">
								<div class = "form-group">
									<label class = "required-field" for = "dateStart">Date de début</label>
									<input class = "form-control" id = "dateStart" name = "dateStart"
											placeholder = "Date de début"
											type = "date">
								</div>
							</div>
							<div class = "col-sm-12 mb-2">
								<div class = "form-group">
									<label class = "required-field" for = "dateEnd">Date de fin</label>
									<input class = "form-control" id = "dateEnd" name = "dateEnd"
											placeholder = "Date de fin"
											type = "date">
								</div>
							</div>
							<div class = "col-sm-12 mb-2">
								<div class = "form-group">
									<label class = "required-field" for = "capacity">Capacité de l'évenement</label>
									<input class = "form-control" id = "capacity" name = "capacity"
											placeholder = "Capacité"
											type = "number">
								</div>
							</div>


							<div class = "col-sm-12 mb-2">
								<button class = "btn btn-primary" id = "bt-ajouter" name = "submit"
										type = "submit">Ajouter
								</button>
							</div>

						</div>
					</form>
				</div>
				<!-- End event Form Wrapper -->

			</div>
		</div>
	</div>
</div>
</body>


<script>
    $(document).ready(function () {


        $('#bt-ajouter').click(function (e) {
            e.preventDefault()
            $.ajax({
                url: "../Ressources/php/bd.php",
                type: "POST",
                dataType: "json",
                data: {
                    "requete": "insertEvent",
                    "name": $('#name').val(),
                    "description": $('#description').val(),
                    "location": $('#location').val(),
                    "dateStart": $('#dateStart').val(),
                    "dateEnd": $('#dateEnd').val(),
                    "maxCapacity": $('#capacity').val()
                },
                success: function (reponse) {
                    console.log(reponse)
                    window.location.href = "Accueil_Administratif.html";
                },
                error: function (message, e) {
                    console.log(message);
                }

            });


        })
    })

    /* Fait fermer la fenêtre */
    function closeWin() {
        window.top.close();
    }

    /* Permet d'ouvrir le slide menu de gauche */
    function openNav() {
        document.getElementById("mySidenav").style.width = "400px";
        document.getElementById("main").style.marginLeft = "400px";
    }

    /* Permet de fermer le slide menu de gauche */
    function closeNav() {
        document.getElementById("mySidenav").style.width = "0";
        document.getElementById("main").style.marginLeft = "0";
    }
</script>
</html>